{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}{{ title|default:"Personal Website" }}{% endblock %}</title>
    
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'css/site.css' %}">
    
    {% block extra_css %}{% endblock %}
</head>
<body class="min-h-screen font-sans text-white bg-gradient-to-br from-black via-gray-900 to-black">
    <div id="loader-overlay" class="fixed left-0 right-0 bottom-0 top-16 z-40 hidden items-center justify-center bg-black">
        <div class="loader"></div>
    </div>
    <!-- Header -->
    <header class="bg-white/10 backdrop-blur-md fixed w-full top-0 z-50 border-b border-white/20">
        <nav class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <a href="{% url 'pages:home' %}" class="text-2xl font-bold text-white">{{ name|default:"Your Name" }}</a>
                <ul class="flex space-x-8">
                    <li><a href="{% url 'pages:home' %}" class="text-white hover:text-yellow-300 transition-colors duration-300">Home</a></li>
                    <li><a href="{% url 'pages:about' %}" class="text-white hover:text-yellow-300 transition-colors duration-300">About</a></li>
                    <li><a href="{% url 'pages:portfolio' %}" class="text-white hover:text-yellow-300 transition-colors duration-300">Portfolio</a></li>
                    <li><a href="{% url 'pages:contact' %}" class="text-white hover:text-yellow-300 transition-colors duration-300">Contact</a></li>
                </ul>
            </div>
        </nav>
    </header>

    <!-- Main Content -->
    <main class="pt-16">
        {% block content %}{% endblock %}
    </main>

    <!-- Footer -->
    <footer class="bg-black/30 text-white text-center py-8 mt-16">
        <div class="max-w-7xl mx-auto px-4">
            <p>&copy; 2024 {{ name|default:"Your Name" }}. All rights reserved.</p>
        </div>
    </footer>

    <!-- HTMX -->
    <script src="https://unpkg.com/htmx.org@1.9.10"></script>
    
    <!-- Font Awesome -->
    <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
    
    <!-- Custom JavaScript -->
    <script>
        (function(){
            var overlay = document.getElementById('loader-overlay');
            if(!overlay) return;

            function show(ms){
                overlay.classList.remove('hidden');
                overlay.classList.add('flex');
                if (ms) {
                    setTimeout(hide, ms);
                }
            }
            function hide(){
                overlay.classList.add('hidden');
                overlay.classList.remove('flex');
            }

            // Initial load behavior: show only on first visit for 2s
            if (!sessionStorage.getItem('visited')) {
                show();
                setTimeout(function(){
                    hide();
                    sessionStorage.setItem('visited', '1');
                }, 2000);
            } else {
                // Ensure hidden on subsequent loads
                hide();
            }

            // Link clicks to different views: show for 1s
            document.addEventListener('click', function(e){
                var a = e.target.closest('a');
                if(!a) return;
                var href = a.getAttribute('href');
                if(!href) return;
                if (href.startsWith('#')) return; // ignore in-page anchors
                if (a.target === '_blank') return; // ignore new tab
                if (e.metaKey || e.ctrlKey || e.shiftKey || e.altKey) return; // respect modifier opens
                e.preventDefault();
                show();
                setTimeout(function(){ window.location.href = href; }, 1000);
            });
        })();
    </script>
    {% block extra_js %}{% endblock %}
</body>
</html>
